/*! sinanbolel-angular 14-08-2015 */
String.prototype.condense=function(){"use strict";return this.replace(/(\r\n|\n|\r)/gm,"")};var appModule=angular.module("SinanBolelApp",["trackJs","ui.router","firebase","angularMoment","ngMaterial","cmsClient","mdLayout","server","thinkcrazy.home","thinkcrazy.apps"]);appModule.constant("AUTO_ANON",!0),appModule.constant("FBURL","https://sinanbolel.firebaseio.com"),appModule.config(["$urlRouterProvider","$logProvider","$mdThemingProvider","cmsClientProvider","FBURL",function(a,b,c,d,e){a.otherwise("/"),b.debugEnabled(!1),d.setContentUrl(e+"/_sinanbolel/content")}]),appModule.run(["$log","$rootScope","$state","$stateParams","ServerService",function(a,b,c,d,e){e.ping(),b.$state=c,b.$stateParams=d,b.$on("$stateChangeError",function(b,d,e,f,g,h){"AUTH_REQUIRED"===h?(a.error(h),c.go("user.login")):a.error(h)})}]),appModule.filter("reverse",function(){return function(a){return _.toArray(a).slice().reverse()}});var homeModule=angular.module("thinkcrazy.home",[]);homeModule.config(["$stateProvider",function(a){a.state("home",{url:"/","abstract":!0,template:"<ui-view/>"}).state("home.index",{url:"",views:{"":{controller:"HomeController",templateUrl:"src/home/home.html"}}})}]),homeModule.controller("HomeController",["$log","$scope","$mdToast","FBURL",function(a,b,c,d){function e(){if(b.contact.$valid){var a=new j,c=h();a.set(c,g)}}function f(){return Object.keys(k).filter(function(a){return k[a]}).join(" ")}function g(d){d?(a.error("Error submitting contact message:",d),c.show(c.simple().content("Error!").position(f()).hideDelay(5e3))):(a.debug("Submitted contact message."),b.messageData={},b.contact.$setUntouched(),b.contact.$setPristine(),c.show(c.simple().content("Sent!").position(f()).hideDelay(5e3)))}function h(){return b.messageData.submitAt=Firebase.ServerValue.TIMESTAMP,b.messageData.submitAtString=Date(b.messageData.submitAt),b.messageData}var i=new Firebase(d+"/messages"),j=function(){return i.push()},k={bottom:!0,top:!1,left:!0,right:!0};b.submit=function(){e()}}]);var appsModule=angular.module("thinkcrazy.apps",["thinkcrazy.apps.requester"]);appsModule.config(["$stateProvider",function(a){a.state("apps",{url:"/apps","abstract":!0,template:"<ui-view/>"}).state("apps.home",{url:"",templateUrl:"src/apps/apps.html"})}]);var requesterModule=angular.module("thinkcrazy.apps.requester.service",[]).service("RequesterService",["$log","$q","$http",function(a,b,c){var d=[],e=function(a,b){return"undefined"!=typeof a?this.url=a:this.url="","undefined"!=typeof b?this.params=b:this.params={},this.response={data:{},status:{},headers:{},config:{}},this.key=d.length,d.push(this),this};return e.prototype.setResponse=function(a,b,c,d){this.response={data:a,status:b,headers:c,config:d}},e.prototype.execute=function(){var a=this,d=b.defer();return("undefined"==typeof this.url||"undefined"==typeof this.params)&&d.reject("Missing request url/params."),c.get(this.url,this.params).success(function(b,c,e,f){a.setResponse(b,c,e,f),d.resolve(b,c,e,f)}).error(function(b,c,e,f){a.setResponse(b,c,e,f),d.reject(b,c,e,f)}),d.promise},e.prototype.cache=function(){},this.getRequestByKey=function(a){return"undefined"!=typeof d[a]?d[a]:null},this.createRequest=function(c,d){var f=b.defer(),g=new e(c,d);return g.execute().then(function(b,c,d,e){a.debug("Completed request:\n",b,c,d,e),f.resolve(b,c,d,e)})["catch"](function(b,c,d,e){a.error("Error completing request\n:",b,c,d,e),f.reject(b,c,d,e)}),f.promise},this}]),requesterModule=angular.module("thinkcrazy.apps.requester",["thinkcrazy.apps.requester.service"]);requesterModule.config(["$stateProvider",function(a){a.state("apps.requester",{url:"/requester",controller:"RequesterAppController",templateUrl:"src/apps/requester/requester.html"})}]),requesterModule.controller("RequesterAppController",["$log","$scope","$http","RequesterService","ServerService",function(a,b,c,d,e){function f(c,d,f){"xml"===d&&"json"===f?e.request.xmlToJson(c).then(function(c){a.debug("convertData.xmlToJson",c),b.requester.$jsonResult=JSON.parse(c.data)}):a.error("Unknown conversion type.")}b.requester={$loading:!1,$requestKeys:[],params:{}},b.makeRequest=function(){b.requester.$loading=!0,d.createRequest(b.requester.url,b.requester.params).then(function(a,c,d,e){b.requester.response=a})["catch"](function(a,c,d,e,f){b.requester.response=c})},b.init=function(){e.ping()},b.xmlToJson=function(){var c=b.requester.response;c?f(c.replace(/(\r\n|\n|\r)/gm,""),"xml","json"):a.error("$scope.requester.response not set")}}]);var serverUtil=angular.module("server",[]);serverUtil.constant("SERVER_URL","https://sinanbolel.herokuapp.com"),serverUtil.constant("PING_PARAMS","?env=dev"),serverUtil.service("ServerService",["$log","$q","$http","SERVER_URL","PING_PARAMS",function(a,b,c,d,e){return this.getServerUrl=function(){return d},this.ping=function(f){var g=b.defer(),h=e;return f&&(h+=f),a.debug("Pinging server with params",h),c.get(d+"/ping"+h).success(function(b,c,d,e){a.debug("Server ping success. \n - status:",c),g.resolve({data:b,status:c,headers:d,config:e})}).error(function(b,c,d,e){a.error("Server ping failed. \n - status:",c,"\n - data:",b),g.reject({data:b,status:c,headers:d,config:e})}),g.promise},this.request={xmlToJson:function(e){var f=b.defer(),g={method:"POST",url:d+"/services/xmlToJson",headers:{"Content-Type":void 0},data:e};return c(g).success(function(b,c,d,e){a.debug("server.xmlToJson",c),f.resolve(b)}).error(function(b,c,d,e){a.error("server.xmlToJson",c),f.reject(b,c,d,e)}),f.promise}},this}]);